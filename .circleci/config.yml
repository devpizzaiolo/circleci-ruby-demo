jobs:
  build:
    deploy-prod:
      docker:
      # specify the version you desire here (you might not want node)
        - image: circleci/node:7.10
        # Add steps to the job
        # See: https://circleci.com/docs/2.0/configuration-reference/#steps
      steps:
      
        - checkout
      
        - run: ssh -oStrictHostKeyChecking=no -v $DROPLET_USER@$DROPLET_IP “./deploy_project.sh”
          


# Invoke jobs via workflows
# See: https://circleci.com/docs/2.0/configuration-reference/#workflows

workflows:

  version: 2
  
  build-and-deploy:
  
    jobs:
    
      - build
      
      - deploy-prod:    
  
          filters:
          
            branches:
            
              only:
              
                - master  
                
          requires:
          
            - build                
            
